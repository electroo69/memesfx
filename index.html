<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Memesfx | The largest instant sound buttons website</title>
    <meta
      name="title"
      content="Memesfx | The largest instant sound buttons website"
    />
    <meta
      name="description"
      content="Memesfx is where you discover funny instant sound buttons. Listen and share sounds of memes, gaming, movies, anime, and more. Play and download sound effects instantly!"
    />
    <meta
      name="keywords"
      content="soundboard, sound effects, instant sounds, meme sounds, funny sounds, sound buttons, audio clips, gaming sounds, anime sounds, movie sounds"
    />
    <meta name="author" content="Memesfx" />
    <meta name="robots" content="index, follow" />

    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://memesfx.gyatbox.space/" />
    <meta
      property="og:title"
      content="Memesfx | The largest instant sound buttons website"
    />
    <meta
      property="og:description"
      content="Memesfx is where you discover funny instant sound buttons. Listen and share sounds of memes, gaming, movies, and more."
    />
    <meta
      property="og:image"
      content="https://memesfx.gyatbox.space/preview-image.jpg"
    />

    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://memesfx.gyatbox.space/" />
    <meta
      property="twitter:title"
      content="Memesfx | The largest instant sound buttons website"
    />
    <meta
      property="twitter:description"
      content="Memesfx is where you discover funny instant sound buttons. Listen and share sounds of memes, gaming, movies, and more."
    />
    <meta
      property="twitter:image"
      content="https://memesfx.gyatbox.space/preview-image.jpg"
    />

    <link rel="canonical" href="https://memesfx.gyatbox.space/" />

    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        background-color: #f5f5f5;
        color: #2c2c2c;
        font-family: "Arial", sans-serif;
        line-height: 1.6;
        padding: 0;
        display: flex;
        justify-content: center;
      }
      .page-wrapper {
        width: 100%;
        display: flex;
        justify-content: center;
        gap: 2rem;
        max-width: 1800px;
        padding: 1rem;
      }
      .container {
        max-width: 1200px;
        flex: 1;
        overflow-x: hidden;
      }
      .left-sidebar-ad,
      .right-sidebar-ad {
        position: sticky;
        top: 1rem;
        height: fit-content;
        width: 160px;
        flex-shrink: 0;
      }
      .side-ad {
        background-color: #e8e8e8;
        border: 1px solid #d0d0d0;
        border-radius: 8px;
        min-height: 600px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #666;
        font-size: 0.85rem;
        padding: 0.5rem;
        text-align: center;
        overflow: hidden;
      }
      .main-content-wrapper {
        min-width: 0;
      }
      h1 {
        text-align: center;
        margin-bottom: 1rem;
        color: #6b4ce6;
      }
      .ad {
        background-color: #e8e8e8;
        border: 1px solid #d0d0d0;
        border-radius: 8px;
        min-height: 90px;
        margin: 1rem 0;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #666;
        font-size: 0.9rem;
        overflow: hidden;
        position: relative;
      }
      .adsterra-wrapper {
        width: 100%;
        display: flex;
        justify-content: center;
        overflow-x: auto;
      }
      .inline-ad {
        grid-column: 1 / -1;
        margin: 1rem 0;
      }
      .search {
        display: flex;
        gap: 0.5rem;
        margin-bottom: 2rem;
        flex-wrap: wrap;
      }
      #searchInput {
        flex: 1;
        min-width: 200px;
        padding: 0.75rem;
        background-color: #ffffff;
        border: 1px solid #d0d0d0;
        border-radius: 4px;
        color: #2c2c2c;
        font-size: 1rem;
      }
      #searchInput::placeholder {
        color: #999;
      }
      #searchBtn {
        padding: 0.75rem 1.5rem;
        background-color: #6b4ce6;
        border: none;
        border-radius: 4px;
        color: #ffffff;
        font-size: 1rem;
        cursor: pointer;
        font-weight: bold;
      }
      #searchBtn:hover {
        background-color: #5a3dc4;
      }

      /* --- GRID SYSTEM --- */
      .grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
        gap: 1.5rem;
        margin-bottom: 2rem;
      }
      .sound-item {
        display: flex;
        flex-direction: column;
        align-items: center;
        width: 100%;
      }
      .button {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 160px;
        height: 160px;
        background-color: var(--button-bg);
        border: 8px solid var(--button-border);
        color: white;
        border-radius: 50px;
        cursor: pointer;
        transition: all 0.3s;
        font-size: 3rem;
      }

      .button:hover {
        border: 8px solid var(--button-border-hover);
        background-color: var(--button-bg-hover);
      }

      .button:active {
        border: 5px solid var(--button-border);
      }

      .button:hover .play-icon {
        animation: jello-vertical 0.9s both;
        transform-origin: center;
      }

      @keyframes jello-vertical {
        0% {
          transform: scale3d(1, 1, 1);
        }
        30% {
          transform: scale3d(0.75, 1.25, 1);
        }
        40% {
          transform: scale3d(1.25, 0.75, 1);
        }
        50% {
          transform: scale3d(0.85, 1.15, 1);
        }
        65% {
          transform: scale3d(1.05, 0.95, 1);
        }
        75% {
          transform: scale3d(0.95, 1.05, 1);
        }
        100% {
          transform: scale3d(1, 1, 1);
        }
      }

      .sound-info {
        margin-top: 0.75rem;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        width: 100%;
        max-width: 250px;
      }

      /* SEO Link Styling */
      .sound-link {
        color: #2c2c2c;
        text-decoration: none;
        flex: 1;
        overflow: hidden;
        display: flex; /* Helps vertically align text */
      }

      .sound-link:hover .sound-name {
        color: #6b4ce6;
        text-decoration: underline;
      }

      .sound-name {
        font-size: 0.9rem;
        text-align: center;
        width: 100%;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }

      .Btn {
        width: 45px;
        height: 45px;
        border: none;
        border-radius: 50%;
        background-color: rgb(214, 178, 255);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        position: relative;
        transition-duration: 0.3s;
        flex-shrink: 0;
      }

      .svgIcon {
        fill: rgb(0, 0, 0);
        width: 1.2em;
        height: 1.2em;
      }

      .icon2 {
        width: 14px;
        height: 4px;
        border-bottom: 2px solid rgb(0, 0, 0);
        border-left: 2px solid rgb(0, 0, 0);
        border-right: 2px solid rgb(182, 143, 255);
      }

      .tooltip {
        position: absolute;
        right: -105px;
        opacity: 0;
        background-color: rgb(12, 12, 12);
        color: white;
        padding: 5px 10px;
        border-radius: 5px;
        display: flex;
        align-items: center;
        justify-content: center;
        transition-duration: 0.2s;
        pointer-events: none;
        letter-spacing: 0.5px;
        white-space: nowrap;
      }

      .tooltip::before {
        position: absolute;
        content: "";
        width: 10px;
        height: 10px;
        background-color: rgb(12, 12, 12);
        background-size: 1000%;
        background-position: center;
        transform: rotate(45deg);
        left: -5%;
        transition-duration: 0.3s;
      }

      .Btn:hover .tooltip {
        opacity: 1;
        transition-duration: 0.3s;
      }

      .Btn:hover {
        background-color: rgb(150, 94, 255);
        transition-duration: 0.3s;
      }

      .Btn:hover .icon2 {
        border-bottom: 2px solid rgb(235, 235, 235);
        border-left: 2px solid rgb(235, 235, 235);
        border-right: 2px solid rgb(235, 235, 235);
      }

      .Btn:hover .svgIcon {
        fill: rgb(255, 255, 255);
        animation: slide-in-top 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94) both;
      }

      @keyframes slide-in-top {
        0% {
          transform: translateY(-10px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }

      #loading {
        text-align: center;
        color: #666;
        font-style: italic;
        display: none;
      }
      .pagination {
        text-align: center;
        margin: 1rem 0;
      }
      .pagination button {
        padding: 0.5rem 1rem;
        background-color: #6b4ce6;
        border: none;
        border-radius: 4px;
        color: #ffffff;
        cursor: pointer;
        font-weight: bold;
        margin: 0 0.5rem;
      }
      .pagination button:hover:not(:disabled) {
        background-color: #5a3dc4;
      }
      .pagination button:disabled {
        background-color: #d0d0d0;
        color: #999;
        cursor: not-allowed;
      }
      #pageInfo {
        margin: 0 1rem;
        font-size: 1rem;
        color: #2c2c2c;
      }

      /* Dedicated Sound Page Elements */
      #singleSoundView {
        display: none;
        flex-direction: column;
        align-items: center;
        padding: 2rem;
        background: white;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        margin-bottom: 2rem;
        text-align: center;
      }
      #singleSoundView h1 {
        font-size: 2rem;
        margin-bottom: 0.5rem;
      }
      #backBtn {
        align-self: flex-start;
        margin-bottom: 1rem;
        background: none;
        border: none;
        color: #666;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 5px;
      }
      #backBtn:hover {
        color: #6b4ce6;
      }

      /* --- MEDIA QUERIES --- */

      @media (max-width: 1400px) {
        .left-sidebar-ad,
        .right-sidebar-ad {
          display: none;
        }
      }

      /* Mobile Responsiveness adjustments */
      @media (max-width: 600px) {
        .search {
          flex-direction: column;
        }
        #searchInput {
          min-width: auto;
        }

        .grid {
          grid-template-columns: repeat(auto-fill, minmax(90px, 1fr));
          gap: 0.75rem;
        }

        .button {
          width: 100%;
          aspect-ratio: 1;
          height: auto;
          max-width: 120px;
          border-width: 4px;
          border-radius: 25px;
          font-size: 1.5rem;
        }

        .button:hover {
          border-width: 4px;
        }

        .button:active {
          border-width: 3px;
        }

        .sound-info {
          gap: 5px;
          margin-top: 0.4rem;
        }

        .sound-name {
          font-size: 0.7rem;
        }

        .Btn {
          width: 36px;
          height: 36px;
          padding: 8px;
          min-width: 36px;
        }
        .svgIcon {
          width: 100%;
          height: 100%;
        }
        .icon2 {
          display: none;
        }
        .tooltip {
          display: none;
        }
      }
    </style>

    <script id="schema-struct" type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "Memesfx",
        "url": "https://memesfx.gyatbox.space/"
      }
    </script>
  </head>
  <body>
    <div class="page-wrapper">
      <aside class="left-sidebar-ad">
        <div class="side-ad">
          <script type="text/javascript">
            atOptions = {
              key: "a987403d86d10ea7dae571a081e651c4",
              format: "iframe",
              height: 600,
              width: 160,
              params: {},
            };
          </script>
          <script
            type="text/javascript"
            src="//www.highperformanceformat.com/a987403d86d10ea7dae571a081e651c4/invoke.js"
          ></script>
        </div>
      </aside>

      <div class="container">
        <h1 id="pageHeader">Memesfx Soundboard</h1>

        <div class="ad adsterra-wrapper">
          <script type="text/javascript">
            atOptions = {
              key: "c50bb328670da58a01a9ba5ef5827975",
              format: "iframe",
              height: 90,
              width: 728,
              params: {},
            };
          </script>
          <script
            type="text/javascript"
            src="//www.highperformanceformat.com/c50bb328670da58a01a9ba5ef5827975/invoke.js"
          ></script>
        </div>

        <main class="main-content">
          <div class="search">
            <input
              type="text"
              id="searchInput"
              placeholder="Enter sound name"
            />
            <button id="searchBtn">Search & Play</button>
          </div>

          <div id="singleSoundView">
            <button id="backBtn">← Back to Trending</button>
            <div id="singleSoundContainer"></div>
          </div>

          <div id="mainGridView">
            <h2 id="sectionTitle" style="color: #6b4ce6; margin-bottom: 1rem">
              Trending Sounds
            </h2>
            <div id="soundsGrid" class="grid"></div>

            <div id="pagination" class="pagination" style="display: none">
              <button id="prevBtn" disabled>Prev</button>
              <span id="pageInfo">Page 1 of 50</span>
              <button id="nextBtn">Next</button>
            </div>
          </div>

          <div id="loading">Loading trending sounds...</div>

          <div class="ad adsterra-wrapper">
            <script type="text/javascript">
              atOptions = {
                key: "c50bb328670da58a01a9ba5ef5827975",
                format: "iframe",
                height: 90,
                width: 728,
                params: {},
              };
            </script>
            <script
              type="text/javascript"
              src="//www.highperformanceformat.com/c50bb328670da58a01a9ba5ef5827975/invoke.js"
            ></script>
          </div>
        </main>
      </div>

      <aside class="right-sidebar-ad">
        <div class="side-ad">
          <script type="text/javascript">
            atOptions = {
              key: "a987403d86d10ea7dae571a081e651c4",
              format: "iframe",
              height: 600,
              width: 160,
              params: {},
            };
          </script>
          <script
            type="text/javascript"
            src="//www.highperformanceformat.com/a987403d86d10ea7dae571a081e651c4/invoke.js"
          ></script>
        </div>
      </aside>
    </div>

    <script>
      let currentAudio = null;
      let currentPage = 1;
      const maxPage = 50;
      const pageCache = new Map();
      const preloadQueue = new Set();
      const API_BASE_CANDIDATES = [
        window.__MEMESFX_API_BASE__,
        `${window.location.origin.replace(/\/$/, "")}/api`,
        "https://myinstants-api.vercel.app",
      ].filter(
        (value, index, list) => value && list.indexOf(value) === index
      );
      let resolvedApiBase = null;

      const colorSchemes = [
        {
          bg: "#006aff",
          border: "#c0dfff",
          borderHover: "#b1d8ff",
          bgHover: "#1b7aff",
        },
        {
          bg: "#ff006e",
          border: "#ffc0d9",
          borderHover: "#ffb1d1",
          bgHover: "#ff1b7e",
        },
        {
          bg: "#8338ec",
          border: "#ddc0ff",
          borderHover: "#d4b1ff",
          bgHover: "#9b4fff",
        },
        {
          bg: "#00f5d4",
          border: "#c0fff5",
          borderHover: "#b1ffef",
          bgHover: "#1bffe0",
        },
        {
          bg: "#ffbe0b",
          border: "#fff0c0",
          borderHover: "#ffecb1",
          bgHover: "#ffc91b",
        },
        {
          bg: "#fb5607",
          border: "#ffd5c0",
          borderHover: "#ffcbb1",
          bgHover: "#ff671b",
        },
        {
          bg: "#3a86ff",
          border: "#c9ddff",
          borderHover: "#bfd7ff",
          bgHover: "#4e94ff",
        },
        {
          bg: "#ff006e",
          border: "#ffc0d9",
          borderHover: "#ffb1d1",
          bgHover: "#ff1b7e",
        },
        {
          bg: "#06ffa5",
          border: "#c0ffe4",
          borderHover: "#b1ffdd",
          bgHover: "#1bffaf",
        },
        {
          bg: "#ff4d6d",
          border: "#ffd0d9",
          borderHover: "#ffc5d0",
          bgHover: "#ff5e7d",
        },
      ];

      function getRandomColor() {
        return colorSchemes[Math.floor(Math.random() * colorSchemes.length)];
      }

      function playSound(mp3Url) {
        if (currentAudio) {
          currentAudio.pause();
          currentAudio = null;
        }
        currentAudio = new Audio(mp3Url);
        currentAudio.play().catch((e) => console.error("Playback failed:", e));
      }

      function createAdElement() {
        const adContainer = document.createElement("div");
        adContainer.className = "inline-ad ad adsterra-wrapper";
        adContainer.style.minHeight = "100px";
        adContainer.style.width = "100%";
        adContainer.style.minWidth = "300px";
        adContainer.style.overflowX = "auto";

        const iframe = document.createElement("iframe");
        iframe.style.width = "728px";
        iframe.style.height = "90px";
        iframe.style.border = "none";
        iframe.style.overflow = "hidden";
        iframe.scrolling = "no";

        adContainer.appendChild(iframe);

        setTimeout(() => {
          try {
            const doc = iframe.contentWindow.document;
            doc.open();
            doc.write(`
                    <html>
                    <body style="margin:0;padding:0;display:flex;justify-content:center;">
                        <script type="text/javascript">
                            atOptions = {
                                'key' : 'c50bb328670da58a01a9ba5ef5827975',
                                'format' : 'iframe',
                                'height' : 90,
                                'width' : 728,
                                'params' : {}
                            };
                        <\/script>
                        <script type="text/javascript" src="//www.highperformanceformat.com/c50bb328670da58a01a9ba5ef5827975/invoke.js"><\/script>
                    </body>
                    </html>
                `);
            doc.close();
          } catch (e) {
            console.log("Adsterra injection error", e);
          }
        }, 50);

        return adContainer;
      }

      function createSoundDOM(sound, index, isSingleView = false) {
        const colors = colorSchemes[(index || 0) % colorSchemes.length];

        const soundItem = document.createElement("div");
        soundItem.className = "sound-item";
        if (isSingleView) soundItem.style.transform = "scale(1.2)";

        const btn = document.createElement("button");
        btn.className = "button";
        btn.role = "button";
        btn.innerHTML = `<span class="play-icon">▶</span>`;
        btn.style.setProperty("--button-bg", colors.bg);
        btn.style.setProperty("--button-border", colors.border);
        btn.style.setProperty("--button-border-hover", colors.borderHover);
        btn.style.setProperty("--button-bg-hover", colors.bgHover);

        btn.onclick = () => playSound(sound.mp3);

        const infoDiv = document.createElement("div");
        infoDiv.className = "sound-info";

        // SEO Change: Use Anchor tag instead of Span for crawling
        const nameLink = document.createElement("a");
        nameLink.className = "sound-link";
        // We use query parameter ?sound=ID-SLUG to simulate a page
        nameLink.href = `?sound=${sound.id}`;
        nameLink.onclick = (e) => {
          e.preventDefault();
          // Manually handle navigation for SPA feel but update URL for SEO
          window.history.pushState(
            { soundId: sound.id },
            "",
            `?sound=${sound.id}`
          );
          loadSingleSound(sound);
        };

        const nameSpan = document.createElement("span");
        nameSpan.className = "sound-name";
        nameSpan.textContent = sound.title;
        nameSpan.title = sound.title;

        nameLink.appendChild(nameSpan);

        const downloadBtn = document.createElement("button");
        downloadBtn.className = "Btn";
        downloadBtn.innerHTML = `
            <svg class="svgIcon" viewBox="0 0 384 512" height="1em" xmlns="http://www.w3.org/2000/svg">
              <path d="M169.4 470.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 370.8 224 64c-17.7-14.3-32-32-32s-32 14.3-32 32l0 306.7L54.6 265.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"></path>
            </svg>
            <span class="icon2"></span>
            <span class="tooltip">Download</span>
        `;
        downloadBtn.onclick = async (e) => {
          e.stopPropagation();
          try {
            const proxyUrl = `https://api.codetabs.com/v1/proxy?quest=${encodeURIComponent(
              sound.mp3
            )}`;
            const response = await fetch(proxyUrl);
            const blob = await response.blob();
            const url = window.URL.createObjectURL(blob);
            const link = document.createElement("a");
            link.href = url;
            link.download = sound.title + ".mp3";
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            window.URL.revokeObjectURL(url);
          } catch (error) {
            console.error("Download failed:", error);
            alert("Failed to download the sound. Please try again.");
          }
        };

        infoDiv.appendChild(nameLink);
        infoDiv.appendChild(downloadBtn);

        soundItem.appendChild(btn);
        soundItem.appendChild(infoDiv);

        return soundItem;
      }

      function displaySounds(sounds) {
        const grid = document.getElementById("soundsGrid");
        grid.innerHTML = "";

        const itemsPerRow = Math.floor(grid.offsetWidth / 180) || 6;
        const rowsBeforeAd = 3;
        const itemsBeforeAd = itemsPerRow * rowsBeforeAd;

        sounds.forEach((sound, index) => {
          if (index > 0 && index % itemsBeforeAd === 0) {
            const adElement = createAdElement();
            grid.appendChild(adElement);
          }
          grid.appendChild(createSoundDOM(sound, index));
        });
      }

      function updatePagination() {
        document.getElementById(
          "pageInfo"
        ).textContent = `Page ${currentPage} of ${maxPage}`;
        document.getElementById("prevBtn").disabled = currentPage === 1;
        document.getElementById("nextBtn").disabled = currentPage === maxPage;
      }

      function buildApiUrl(base, endpoint, params) {
        const normalizedBase = base.replace(/\/$/, "");
        const normalizedEndpoint = endpoint.startsWith("/")
          ? endpoint
          : `/${endpoint}`;
        const url = new URL(`${normalizedBase}${normalizedEndpoint}`);
        Object.entries(params || {}).forEach(([key, value]) =>
          url.searchParams.set(key, value)
        );
        return url;
      }

      function getApiBases() {
        if (!resolvedApiBase) {
          return API_BASE_CANDIDATES;
        }
        return [
          resolvedApiBase,
          ...API_BASE_CANDIDATES.filter((base) => base !== resolvedApiBase),
        ];
      }

      async function fetchSounds(endpoint, params) {
        let lastError;
        for (const base of getApiBases()) {
          try {
            const url = buildApiUrl(base, endpoint, params);
            const response = await fetch(url.toString());
            if (!response.ok) {
              throw new Error(`API request failed with ${response.status}`);
            }
            const data = await response.json();
            const payload = Array.isArray(data.data)
              ? data.data
              : data.data
              ? [data.data]
              : [];
            resolvedApiBase = base;
            return payload;
          } catch (error) {
            lastError = error;
          }
        }
        throw lastError || new Error("Failed to fetch sounds");
      }

      // --- SEO FUNCTIONS ---

      function updateSEOMetadata(title, description, image) {
        document.title = title;
        document
          .querySelector('meta[name="title"]')
          .setAttribute("content", title);
        document
          .querySelector('meta[name="description"]')
          .setAttribute("content", description);

        // Update OG Tags
        document
          .querySelector('meta[property="og:title"]')
          .setAttribute("content", title);
        document
          .querySelector('meta[property="og:description"]')
          .setAttribute("content", description);
        if (image)
          document
            .querySelector('meta[property="og:image"]')
            .setAttribute("content", image);

        // Update Header
        document.getElementById("pageHeader").textContent =
          title.split(" - ")[0]; // Keep H1 concise
      }

      function injectJSONLD(sound) {
        const schema = {
          "@context": "https://schema.org",
          "@type": "AudioObject",
          name: sound.title,
          description: `Play and download the ${sound.title} sound effect instantly on Memesfx.`,
          contentUrl: sound.mp3,
          encodingFormat: "audio/mpeg",
          uploadDate: new Date().toISOString(),
        };
        const script = document.getElementById("schema-struct");
        script.textContent = JSON.stringify(schema);
      }

      // --- SINGLE SOUND PAGE LOGIC ---

      async function loadSingleSound(sound) {
        // 1. Hide Grid, Show Single View
        document.getElementById("mainGridView").style.display = "none";
        document.getElementById("pagination").style.display = "none";
        document.getElementById("singleSoundView").style.display = "flex";

        const container = document.getElementById("singleSoundContainer");
        container.innerHTML = "";
        // Create a large version of the button
        const soundDOM = createSoundDOM(sound, 2, true); // Use arbitrary index 2 for color
        container.appendChild(soundDOM);

        // 2. Update SEO Metadata dynamically
        const pageTitle = `${sound.title} Sound Button - Download MP3 | Memesfx`;
        const pageDesc = `Listen to the ${sound.title} sound effect. Download ${sound.title} MP3 instantly for your soundboard. Free meme sounds at Memesfx.`;

        updateSEOMetadata(
          pageTitle,
          pageDesc,
          sound.image || "https://memesfx.gyatbox.space/preview-image.jpg"
        );
        injectJSONLD(sound);

        // Scroll to top
        window.scrollTo(0, 0);
      }

      async function fetchAndLoadSingleSound(id) {
        document.getElementById("loading").style.display = "block";
        try {
          // We use search to find the specific ID since API might not have direct get-by-id
          // Or assuming API supports /sounds/:id. For now, we search by ID if API allows, or re-use search.
          // Given the API limitations seen in previous code, we might need to search by Name or ID.
          // Let's try fetching trending or search to find it, or use the direct search endpoint if ID is searchable.

          // Workaround: We will use the search endpoint with the ID, or just load trending and find it if possible.
          // Better: If we passed the name in URL, we could search that.
          // Since we only have ID in URL mostly:

          // If ID is numeric, the API might not support direct fetching easily via this proxy.
          // We will try to fetch trending and see if it's there, or fallback to search.
          // Actually, simplest way for this demo without changing API backend:
          // We will just load trending, find the sound. If not found, show trending.

          // NOTE: For a real production app, you need an API endpoint like /api/sounds/:id

          // For now, let's assume we can display the ID if passed, but since we can't fetch single ID easily
          // we will just load trending but SEO optimized for "Memesfx".
          // If you have a specific endpoint for ID, put it here.

          // Fallback logic for this specific CodeTabs/Vercel setup:
          // We will load trending. If the user clicked a link, they likely came from our site.
          // If coming from Google with ?sound=ID, we might need to fetch a "Search by ID" if available.

          // Attempt to search by ID (assuming API handles it)
          const results = await fetchSounds("/search", { q: id, limit: 1 });
          if (results && results.length > 0) {
            loadSingleSound(results[0]);
          } else {
            // Fallback if ID lookup fails
            console.log("Sound ID lookup failed, loading trending");
            loadTrending(1);
          }
        } catch (e) {
          console.error(e);
          loadTrending(1);
        } finally {
          document.getElementById("loading").style.display = "none";
        }
      }

      document.getElementById("backBtn").onclick = () => {
        // Go back to main view
        document.getElementById("singleSoundView").style.display = "none";
        document.getElementById("mainGridView").style.display = "grid";
        document.getElementById("pagination").style.display = "block";

        // Reset URL
        window.history.pushState({}, "", "/");
        // Reset SEO
        updateSEOMetadata(
          "Memesfx | The largest instant sound buttons website",
          "Memesfx is where you discover funny instant sound buttons. Listen and share sounds of memes, gaming, movies, anime, and more.",
          "https://memesfx.gyatbox.space/preview-image.jpg"
        );
      };

      async function preloadPages(pagesToLoad) {
        for (const page of pagesToLoad) {
          if (
            page < 1 ||
            page > maxPage ||
            pageCache.has(page) ||
            preloadQueue.has(page)
          )
            continue;
          preloadQueue.add(page);
          try {
            const sounds = await fetchSounds("/trending", {
              q: "id",
              page,
              limit: 50,
            });
            pageCache.set(page, sounds);
          } catch (error) {
            console.error(`Failed to preload page ${page}:`, error);
          } finally {
            preloadQueue.delete(page);
          }
        }
      }

      async function loadTrending(page) {
        if (page < 1 || page > maxPage) return;
        currentPage = page;

        document.getElementById("mainGridView").style.display = "grid"; // Ensure grid is visible
        document.getElementById("singleSoundView").style.display = "none";

        if (pageCache.has(page)) {
          displaySounds(pageCache.get(page));
          updatePagination();
          document.getElementById("pagination").style.display = "block";
          preloadNextPages(page);
          return;
        }

        document.getElementById("loading").style.display = "block";
        try {
          const sounds = await fetchSounds("/trending", {
            q: "id",
            page,
            limit: 50,
          });
          pageCache.set(page, sounds);
          displaySounds(sounds);
          updatePagination();
          document.getElementById("pagination").style.display = "block";
          preloadNextPages(page);
        } catch (error) {
          console.error("Error loading trending:", error);
        } finally {
          document.getElementById("loading").style.display = "none";
        }
      }

      function preloadNextPages(page) {
        if (page === 1) preloadPages([2, 3]);
        else if (page === 3) preloadPages([4, 5]);
        else if (page > 5) preloadPages([page + 1, page + 2]);
      }

      async function performSearch(term) {
        document.getElementById("loading").style.display = "block";
        document.getElementById("singleSoundView").style.display = "none";
        document.getElementById("mainGridView").style.display = "grid";

        try {
          const sounds = await fetchSounds("/search", { q: term, limit: 20 });
          displaySounds(sounds);
          document.getElementById("pagination").style.display = "none";
        } catch (error) {
          console.error("Error searching:", error);
        } finally {
          document.getElementById("loading").style.display = "none";
        }
      }

      document.getElementById("searchBtn").onclick = async () => {
        const term = document.getElementById("searchInput").value.trim();
        if (!term) {
          updateUrl("");
          loadTrending(1);
          document.getElementById("sectionTitle").textContent =
            "Trending Sounds";
        } else {
          updateUrl(term, "search");
          performSearch(term);
          document.getElementById(
            "sectionTitle"
          ).textContent = `Search Results: ${term}`;
        }
      };

      document.getElementById("searchInput").onkeypress = (e) => {
        if (e.key === "Enter") document.getElementById("searchBtn").click();
      };

      document.getElementById("prevBtn").onclick = () =>
        loadTrending(currentPage - 1);
      document.getElementById("nextBtn").onclick = () =>
        loadTrending(currentPage + 1);

      function getUrlParameter(name) {
        name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
        const regex = new RegExp("[\\?&]" + name + "=([^&#]*)");
        const results = regex.exec(window.location.search);
        return results === null
          ? ""
          : decodeURIComponent(results[1].replace(/\+/g, " "));
      }

      function updateUrl(term, type) {
        let newUrl = window.location.pathname;
        if (term && type === "search")
          newUrl += `?search=${encodeURIComponent(term)}`;
        window.history.pushState({ search: term }, "", newUrl);
        // Basic SEO update for search
        if (term)
          updateSEOMetadata(
            `${term} Sounds - Memesfx`,
            `Search results for ${term} sound effects.`
          );
      }

      function initializeAds() {
        setTimeout(() => {
          try {
            // Ad init logic here if needed
          } catch (e) {
            console.log("Ad initialization error:", e);
          }
        }, 100);
      }

      window.onload = () => {
        const searchParam = getUrlParameter("search");
        const soundParam = getUrlParameter("sound");

        if (soundParam) {
          // User wants a specific sound page (SEO ENTRY POINT)
          fetchAndLoadSingleSound(soundParam);
        } else if (searchParam) {
          document.getElementById("searchInput").value = searchParam;
          performSearch(searchParam);
          document.getElementById(
            "sectionTitle"
          ).textContent = `Search Results: ${searchParam}`;
        } else {
          preloadPages([2, 3]);
          loadTrending(1);
        }

        initializeAds();
      };

      window.onpopstate = function (event) {
        const searchParam = getUrlParameter("search");
        const soundParam = getUrlParameter("sound");

        if (soundParam) {
          fetchAndLoadSingleSound(soundParam);
        } else if (searchParam) {
          document.getElementById("searchInput").value = searchParam;
          performSearch(searchParam);
        } else {
          // Back to home
          document.getElementById("singleSoundView").style.display = "none";
          document.getElementById("mainGridView").style.display = "grid";
          loadTrending(1);
          document.getElementById("sectionTitle").textContent =
            "Trending Sounds";
        }
      };
    </script>
  </body>
</html>
