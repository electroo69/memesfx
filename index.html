<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <base href="/" />
  <script>
    window.__MEMESFX_API_BASE__ = "https://memesfx-node-backend.vercel.app/api";
  </script>

  <title>Memesfx | The Modern Soundboard</title>
  <meta name="title" content="Memesfx | The Modern Soundboard" />
  <meta name="description"
    content="Discover funny instant sound buttons. Listen and share sounds of memes, gaming, movies, anime, and more." />

  <meta property="og:type" content="website" />
  <meta property="og:title" content="Memesfx Soundboard" />
  <meta property="og:description" content="Play and download funny meme sounds instantly." />
  <meta property="og:image" content="https://memesfx.gyatbox.space/preview-image.jpg" />

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap"
    rel="stylesheet" />

  <style>
    :root {
      --bg-body: #f3f5f7;
      --bg-card: #ffffff;
      --text-main: #0f172a;
      --text-muted: #64748b;
      --primary: #6366f1;
      --radius-xl: 24px;
      --radius-lg: 16px;
      --radius-md: 12px;
      --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
      --shadow-hover: 0 20px 25px -5px rgb(0 0 0 / 0.1),
        0 8px 10px -6px rgb(0 0 0 / 0.1);
      --font-main: "Plus Jakarta Sans", sans-serif;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }

    body {
      background-color: var(--bg-body);
      color: var(--text-main);
      font-family: var(--font-main);
      line-height: 1.5;
      overflow-x: hidden;
    }

    .page-wrapper {
      display: flex;
      justify-content: center;
      gap: 2rem;
      max-width: 1600px;
      margin: 0 auto;
      padding: 2rem 1rem;
    }

    .container {
      flex: 1;
      max-width: 1000px;
      width: 100%;
    }

    header {
      text-align: center;
      margin-bottom: 3rem;
    }

    h1 {
      font-weight: 800;
      font-size: 3rem;
      margin-bottom: 0.5rem;
      background: linear-gradient(135deg, #0f172a 0%, #334155 100%);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .subtitle {
      color: var(--text-muted);
      font-weight: 500;
      font-size: 1.1rem;
    }

    .search-wrapper {
      position: sticky;
      top: 20px;
      z-index: 100;
      margin-bottom: 3rem;
      display: flex;
      justify-content: center;
    }

    .search {
      display: flex;
      align-items: center;
      background: rgba(255, 255, 255, 0.85);
      backdrop-filter: blur(12px);
      padding: 0.5rem;
      border-radius: 50px;
      box-shadow: 0 10px 40px -10px rgba(0, 0, 0, 0.08);
      border: 1px solid rgba(255, 255, 255, 0.5);
      width: 100%;
      max-width: 500px;
    }

    #searchInput {
      flex: 1;
      border: none;
      background: transparent;
      padding: 1rem 1.5rem;
      font-size: 1rem;
      font-weight: 500;
      outline: none;
    }

    #searchBtn {
      background: var(--text-main);
      color: white;
      border: none;
      padding: 0.8rem 1.5rem;
      border-radius: 40px;
      font-weight: 700;
      cursor: pointer;
      margin-right: 4px;
    }

    .ad-container {
      background: #fff;
      border-radius: var(--radius-lg);
      padding: 1rem;
      margin: 2rem 0;
      display: flex;
      justify-content: center;
      align-items: center;
      box-shadow: var(--shadow-sm);
      border: 1px solid #e2e8f0;
    }

    .side-ad-sticky {
      position: sticky;
      top: 2rem;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 1.5rem;
      margin-bottom: 3rem;
    }

    .sound-card {
      background: var(--bg-card);
      border-radius: var(--radius-xl);
      padding: 1.5rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
      border: 1px solid #f1f5f9;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
      height: 100%;
      min-height: 260px;
    }

    .sound-card:hover {
      transform: translateY(-8px) scale(1.02);
      box-shadow: var(--shadow-hover);
    }

    .ad-card {
      padding: 0;
      justify-content: center;
      background: #f8fafc;
      border: 1px dashed #cbd5e1;
    }

    .card-bg-blob {
      position: absolute;
      top: -20%;
      right: -20%;
      width: 150px;
      height: 150px;
      background: var(--blob-color);
      opacity: 0.1;
      border-radius: 50%;
      filter: blur(40px);
      pointer-events: none;
    }

    .play-btn-wrapper {
      z-index: 1;
      width: 100%;
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .play-button {
      width: 110px;
      height: 110px;
      border-radius: 36px;
      background: var(--btn-color);
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      transition: all 0.2s;
      box-shadow: 0 10px 20px -5px var(--btn-shadow);
    }

    .play-button svg {
      fill: currentColor;
      width: 48px;
      height: 48px;
      margin-left: 6px;
    }

    .play-button:hover {
      transform: scale(1.05) rotate(-2deg);
    }

    .card-content {
      z-index: 1;
      width: 100%;
      text-align: center;
    }

    .sound-title {
      display: block;
      font-weight: 800;
      font-size: 1.1rem;
      color: var(--text-main);
      text-decoration: none;
      margin-bottom: 0.75rem;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      line-height: 1.3;
      cursor: pointer;
    }

    .sound-title:hover {
      color: var(--primary);
    }

    .download-btn {
      width: 100%;
      padding: 0.6rem;
      border-radius: var(--radius-md);
      border: 1px solid #e2e8f0;
      background: white;
      color: var(--text-muted);
      font-size: 0.85rem;
      font-weight: 700;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      transition: all 0.2s;
    }

    .download-btn:hover {
      background: #f8fafc;
      border-color: #cbd5e1;
      color: var(--text-main);
    }

    .download-btn svg {
      width: 16px;
      height: 16px;
      fill: currentColor;
    }

    #singleSoundView {
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 50vh;
      animation: fadeIn 0.4s ease;
    }

    #singleSoundContainer .sound-card {
      width: 340px;
      height: 400px;
    }

    #singleSoundContainer .play-button {
      width: 140px;
      height: 140px;
    }

    #backBtn {
      background: white;
      border: 1px solid #e2e8f0;
      padding: 0.75rem 1.5rem;
      border-radius: 50px;
      font-weight: 600;
      cursor: pointer;
      margin-bottom: 2rem;
      align-self: flex-start;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .pagination {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 1rem;
      margin-top: 2rem;
    }

    .page-btn {
      background: white;
      border: 1px solid #e2e8f0;
      width: 44px;
      height: 44px;
      border-radius: 12px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .page-btn:hover:not(:disabled) {
      background: var(--text-main);
      color: white;
    }

    .page-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    #loading {
      text-align: center;
      padding: 2rem;
      font-weight: 600;
      color: var(--text-muted);
      display: none;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Navbar Styles */
    .navbar {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-bottom: 1px solid rgba(0, 0, 0, 0.05);
      position: sticky;
      top: 0;
      z-index: 1000;
      padding: 0.75rem 2rem;
    }

    .navbar-content {
      max-width: 1600px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .navbar-logo {
      font-weight: 800;
      font-size: 1.5rem;
      color: var(--text-main);
      text-decoration: none;
      background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .navbar-links {
      display: flex;
      align-items: center;
      gap: 2rem;
    }

    .navbar-links a {
      color: var(--text-muted);
      text-decoration: none;
      font-weight: 600;
      font-size: 0.95rem;
      transition: color 0.2s ease;
      position: relative;
    }

    .navbar-links a:hover {
      color: var(--primary);
    }

    .navbar-links a::after {
      content: '';
      position: absolute;
      bottom: -4px;
      left: 0;
      width: 0;
      height: 2px;
      background: var(--primary);
      transition: width 0.3s ease;
    }

    .navbar-links a:hover::after {
      width: 100%;
    }

    /* Footer Styles */
    .footer {
      background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
      color: #94a3b8;
      padding: 3rem 2rem 2rem;
      margin-top: 4rem;
    }

    .footer-content {
      max-width: 1600px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1.5rem;
    }

    .footer-logo {
      font-weight: 800;
      font-size: 1.75rem;
      background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .footer-links {
      display: flex;
      gap: 2rem;
      flex-wrap: wrap;
      justify-content: center;
    }

    .footer-links a {
      color: #94a3b8;
      text-decoration: none;
      font-weight: 500;
      font-size: 0.95rem;
      transition: color 0.2s ease;
    }

    .footer-links a:hover {
      color: #f1f5f9;
    }

    .footer-divider {
      width: 100%;
      max-width: 600px;
      height: 1px;
      background: rgba(255, 255, 255, 0.1);
      margin: 1rem 0;
    }

    .footer-copyright {
      font-size: 0.85rem;
      color: #64748b;
    }

    /* Legal Pages Styles */
    #legalPageView {
      display: none;
      animation: fadeIn 0.4s ease;
    }

    .legal-container {
      max-width: 800px;
      margin: 0 auto;
      padding: 2rem 1rem;
    }

    .legal-header {
      text-align: center;
      margin-bottom: 3rem;
    }

    .legal-header h1 {
      font-size: 2.5rem;
      margin-bottom: 0.5rem;
    }

    .legal-header p {
      color: var(--text-muted);
    }

    .legal-content {
      background: var(--bg-card);
      border-radius: var(--radius-xl);
      padding: 2.5rem;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
      border: 1px solid #f1f5f9;
    }

    .legal-content h2 {
      font-size: 1.4rem;
      margin-top: 2rem;
      margin-bottom: 1rem;
      color: var(--text-main);
      padding-bottom: 0.5rem;
      border-bottom: 2px solid #f1f5f9;
    }

    .legal-content h2:first-child {
      margin-top: 0;
    }

    .legal-content p {
      color: var(--text-muted);
      margin-bottom: 1rem;
      line-height: 1.7;
    }

    .legal-content ul {
      color: var(--text-muted);
      margin-bottom: 1rem;
      padding-left: 1.5rem;
    }

    .legal-content li {
      margin-bottom: 0.5rem;
      line-height: 1.6;
    }

    .legal-content a {
      color: var(--primary);
      text-decoration: none;
    }

    .legal-content a:hover {
      text-decoration: underline;
    }

    .legal-back-btn {
      background: white;
      border: 1px solid #e2e8f0;
      padding: 0.75rem 1.5rem;
      border-radius: 50px;
      font-weight: 600;
      cursor: pointer;
      margin-bottom: 2rem;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      transition: all 0.2s ease;
    }

    .legal-back-btn:hover {
      background: var(--text-main);
      color: white;
    }

    @media (max-width: 1024px) {

      .left-sidebar-ad,
      .right-sidebar-ad {
        display: none;
      }
    }

    @media (max-width: 768px) {
      .navbar {
        padding: 0.75rem 1rem;
      }

      .navbar-links {
        gap: 1rem;
      }

      .navbar-links a {
        font-size: 0.85rem;
      }

      .footer-links {
        gap: 1.5rem;
      }
    }

    @media (max-width: 640px) {
      h1 {
        font-size: 2rem;
      }

      .grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 1rem;
      }

      .sound-card {
        min-height: 220px;
        padding: 1rem;
      }

      .play-button {
        width: 80px;
        height: 80px;
      }

      .play-button svg {
        width: 32px;
        height: 32px;
      }

      .navbar-links {
        gap: 0.75rem;
      }

      .navbar-links a {
        font-size: 0.75rem;
      }

      .legal-content {
        padding: 1.5rem;
      }
    }
  </style>

  <script id="schema-struct" type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "Memesfx",
        "url": "https://memesfx.gyatbox.space/"
      }
    </script>
</head>

<body>
  <!-- Navbar -->
  <nav class="navbar">
    <div class="navbar-content">
      <a href="/" class="navbar-logo" onclick="navigateHome(event)">Memesfx</a>
      <div class="navbar-links">
        <a href="/" onclick="navigateHome(event)">Home</a>
        <a href="/privacy-policy" onclick="navigateToPage(event, 'privacy')">Privacy Policy</a>
        <a href="/terms-of-use" onclick="navigateToPage(event, 'terms')">Terms of Use</a>
      </div>
    </div>
  </nav>

  <div class="page-wrapper">
    <aside class="left-sidebar-ad">
      <div class="side-ad-sticky">
        <div class="ad-container" style="width: 160px; min-height: 600px; padding: 0">
          <script type="text/javascript">
            atOptions = {
              key: "a987403d86d10ea7dae571a081e651c4",
              format: "iframe",
              height: 600,
              width: 160,
              params: {},
            };
          </script>
          <script type="text/javascript"
            src="//www.highperformanceformat.com/a987403d86d10ea7dae571a081e651c4/invoke.js"></script>
        </div>
      </div>
    </aside>

    <div class="container">
      <header>
        <h1 id="pageHeader">Memesfx</h1>
        <p class="subtitle">
          Your favorite soundboard.
        </p>
      </header>

      <div class="ad-container" style="min-height: 90px; overflow: hidden">
        <script type="text/javascript">
          atOptions = {
            key: "c50bb328670da58a01a9ba5ef5827975",
            format: "iframe",
            height: 90,
            width: 728,
            params: {},
          };
        </script>
        <script type="text/javascript"
          src="//www.highperformanceformat.com/c50bb328670da58a01a9ba5ef5827975/invoke.js"></script>
      </div>

      <main>
        <div class="search-wrapper">
          <div class="search">
            <input type="text" id="searchInput" placeholder="Search for sounds..." />
            <button id="searchBtn">Search</button>
          </div>
        </div>

        <div id="singleSoundView">
          <button id="backBtn">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
              stroke-linecap="round" stroke-linejoin="round">
              <path d="M19 12H5M12 19l-7-7 7-7" />
            </svg>
            Back to Sounds
          </button>
          <div id="singleSoundContainer"></div>
        </div>

        <div id="mainGridView">
          <h2 id="sectionTitle" style="font-weight: 700; margin-bottom: 1.5rem; font-size: 1.5rem">
            Trending Sounds
          </h2>
          <div id="soundsGrid" class="grid"></div>

          <div id="loading">Loading sounds...</div>

          <div id="pagination" class="pagination" style="display: none">
            <button id="prevBtn" class="page-btn" disabled>
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M15 18l-6-6 6-6" />
              </svg>
            </button>
            <span id="pageInfo">Page 1</span>
            <button id="nextBtn" class="page-btn">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M9 18l6-6-6-6" />
              </svg>
            </button>
          </div>
        </div>

        <div class="ad-container" style="min-height: 90px; overflow: hidden">
          <script type="text/javascript">
            atOptions = {
              key: "c50bb328670da58a01a9ba5ef5827975",
              format: "iframe",
              height: 90,
              width: 728,
              params: {},
            };
          </script>
          <script type="text/javascript"
            src="//www.highperformanceformat.com/c50bb328670da58a01a9ba5ef5827975/invoke.js"></script>
        </div>
      </main>
    </div>

    <aside class="right-sidebar-ad">
      <div class="side-ad-sticky">
        <div class="ad-container" style="width: 160px; min-height: 600px; padding: 0">
          <script type="text/javascript">
            atOptions = {
              key: "a987403d86d10ea7dae571a081e651c4",
              format: "iframe",
              height: 600,
              width: 160,
              params: {},
            };
          </script>
          <script type="text/javascript"
            src="//www.highperformanceformat.com/a987403d86d10ea7dae571a081e651c4/invoke.js"></script>
        </div>
      </div>
    </aside>
  </div>

  <!-- Legal Pages View -->
  <div id="legalPageView">
    <div class="legal-container">
      <button class="legal-back-btn" onclick="navigateHome(event)">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
          stroke-linecap="round" stroke-linejoin="round">
          <path d="M19 12H5M12 19l-7-7 7-7" />
        </svg>
        Back to Home
      </button>
      <div id="legalContent"></div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-logo">Memesfx</div>
      <div class="footer-links">
        <a href="/" onclick="navigateHome(event)">Home</a>
        <a href="/privacy-policy" onclick="navigateToPage(event, 'privacy')">Privacy Policy</a>
        <a href="/terms-of-use" onclick="navigateToPage(event, 'terms')">Terms of Use</a>
      </div>
      <div class="footer-divider"></div>
      <p class="footer-copyright">Â© 2024 Memesfx. All rights reserved.</p>
    </div>
  </footer>

  <script>
    let currentAudio = null;
    let currentPage = 1;
    const maxPage = 50;
    const pageCache = new Map();
    const preloadQueue = new Set();
    const DEFAULT_API_BASE = "https://memesfx-node-backend.vercel.app/api";
    const API_BASE_CANDIDATES = [window.__MEMESFX_API_BASE__, DEFAULT_API_BASE].filter(
      (value, index, list) => value && list.indexOf(value) === index
    );
    let resolvedApiBase = null;

    const themes = [
      { color: "#2E90FA", shadow: "rgba(46, 144, 250, 0.4)" },
      { color: "#F63D68", shadow: "rgba(246, 61, 104, 0.4)" },
      { color: "#FDB022", shadow: "rgba(253, 176, 34, 0.4)" },
      { color: "#12B76A", shadow: "rgba(18, 183, 106, 0.4)" },
      { color: "#9B8AFB", shadow: "rgba(155, 138, 251, 0.4)" },
      { color: "#00E0C6", shadow: "rgba(0, 224, 198, 0.4)" },
    ];

    function getRandomTheme(index) {
      return themes[index % themes.length];
    }

    // Legal Pages Content
    const legalPages = {
      privacy: {
        title: 'Privacy Policy',
        content: `
          <div class="legal-header">
            <h1>Privacy Policy</h1>
            <p>Last updated: December 2024</p>
          </div>
          <div class="legal-content">
            <h2>Memesfx Privacy Policy</h2>
            <p>All or partial advertising on this Website or App is managed by Playwire LLC. If Playwire publisher advertising services are used, Playwire LLC may collect and use certain aggregated and anonymized data for advertising purposes. To learn more about the types of data collected, how data is used and your choices as a user, please visit <a href="https://www.playwire.com/privacy-policy" target="_blank">https://www.playwire.com/privacy-policy</a>.</p>
            
            <h2>Information We Collect</h2>
            <p>We may collect information about your device, browser, and usage patterns to improve our services. This includes IP addresses, browser type, device type, and pages visited.</p>
            
            <h2>Cookies and Web Beacons</h2>
            <p>Like any other website, Memesfx uses 'cookies'. These cookies are used to store information including visitors' preferences, and the pages on the website that the visitor accessed or visited. The information is used to optimize the users' experience by customizing our web page content based on visitors' browser type and/or other information.</p>
            
            <h2>Third-Party Advertisers</h2>
            <p>Third-party ad servers or ad networks use technologies like cookies, JavaScript, or Web Beacons in their respective advertisements and links that appear on Memesfx. They automatically receive your IP address when this occurs. These technologies are used to measure the effectiveness of their advertising campaigns and/or to personalize the advertising content that you see on websites that you visit.</p>
            
            <h2>For EU Users</h2>
            <p>If you are located in countries that are part of the European Economic Area, in the United Kingdom or Switzerland, and publisher advertising services are being provided by Playwire LLC, you were presented with messaging from our Consent Management Platform (CMP) around your privacy choices as a user in regards to digital advertising, applicable vendors, cookie usage and more.</p>
            
            <h2>Contact Us</h2>
            <p>If you have any questions about this Privacy Policy, please contact us.</p>
          </div>
        `
      },
      terms: {
        title: 'Terms of Use',
        content: `
          <div class="legal-header">
            <h1>Terms of Use</h1>
            <p>Version 1.0 - Last updated: December 2024</p>
          </div>
          <div class="legal-content">
            <h2>Website Terms of Use</h2>
            <p>The Memesfx website is a copyrighted work belonging to Memesfx. Certain features of the Site may be subject to additional guidelines, terms, or rules, which will be posted on the Site in connection with such features. All such additional terms, guidelines, and rules are incorporated by reference into these Terms.</p>
            <p>These Terms of Use describe the legally binding terms and conditions that oversee your use of the Site. BY LOGGING INTO THE SITE, YOU ARE BEING COMPLIANT THAT THESE TERMS and you represent that you have the authority and capacity to enter into these Terms. YOU SHOULD BE AT LEAST 18 YEARS OF AGE TO ACCESS THE SITE. IF YOU DISAGREE WITH ALL OF THE PROVISION OF THESE TERMS, DO NOT LOG INTO AND/OR USE THE SITE.</p>

            <h2>Access to the Site</h2>
            <p>Subject to these Terms, Company grants you a non-transferable, non-exclusive, revocable, limited license to access the Site solely for your own personal, noncommercial use.</p>
            <p><strong>Certain Restrictions:</strong> The rights approved to you in these Terms are subject to the following restrictions:</p>
            <ul>
              <li>You shall not sell, rent, lease, transfer, assign, distribute, host, or otherwise commercially exploit the Site;</li>
              <li>You shall not change, make derivative works of, disassemble, reverse compile or reverse engineer any part of the Site;</li>
              <li>You shall not access the Site in order to build a similar or competitive website;</li>
              <li>Except as expressly stated herein, no part of the Site may be copied, reproduced, distributed, republished, downloaded, displayed, posted or transmitted in any form or by any means.</li>
            </ul>

            <h2>User Content</h2>
            <p>"User Content" means any and all information and content that a user submits to the Site. You are exclusively responsible for your User Content. You bear all risks associated with use of your User Content. You hereby certify that your User Content does not violate our Acceptable Use Policy.</p>
            <p>You hereby grant to Company an irreversible, nonexclusive, royalty-free and fully paid, worldwide license to reproduce, distribute, publicly display and perform, prepare derivative works of, incorporate into other works, and otherwise use and exploit your User Content.</p>

            <h2>Acceptable Use Policy</h2>
            <p>You agree not to use the Site to collect, upload, transmit, display, or distribute any User Content:</p>
            <ul>
              <li>That violates any third-party right or any intellectual property or proprietary right;</li>
              <li>That is unlawful, harassing, abusive, tortious, threatening, harmful, invasive of another's privacy, vulgar, defamatory, false, intentionally misleading;</li>
              <li>That is harmful to minors in any way;</li>
              <li>That is in violation of any law, regulation, or obligations.</li>
            </ul>

            <h2>Third-Party Links & Ads</h2>
            <p>The Site may contain links to third-party websites and services, and/or display advertisements for third-parties. Such Third-Party Links & Ads are not under the control of Company, and Company is not responsible for any Third-Party Links & Ads. Company provides access to these Third-Party Links & Ads only as a convenience to you.</p>

            <h2>Disclaimers</h2>
            <p>THE SITE IS PROVIDED ON AN "AS-IS" AND "AS AVAILABLE" BASIS, AND COMPANY AND OUR SUPPLIERS EXPRESSLY DISCLAIM ANY AND ALL WARRANTIES AND CONDITIONS OF ANY KIND, WHETHER EXPRESS, IMPLIED, OR STATUTORY.</p>

            <h2>Limitation on Liability</h2>
            <p>TO THE MAXIMUM EXTENT PERMITTED BY LAW, IN NO EVENT SHALL COMPANY OR OUR SUPPLIERS BE LIABLE TO YOU OR ANY THIRD-PARTY FOR ANY LOST PROFITS, LOST DATA, COSTS OF PROCUREMENT OF SUBSTITUTE PRODUCTS, OR ANY INDIRECT, CONSEQUENTIAL, EXEMPLARY, INCIDENTAL, SPECIAL OR PUNITIVE DAMAGES.</p>

            <h2>Copyright Policy</h2>
            <p>Company respects the intellectual property of others and asks that users of our Site do the same. If you believe that one of our users is unlawfully infringing copyrights, please contact us with the required information as specified by applicable law.</p>

            <h2>General</h2>
            <p>These Terms constitute the entire agreement between you and us regarding the use of the Site. Our failure to exercise or enforce any right or provision of these Terms shall not operate as a waiver of such right or provision.</p>
            <p>If any provision of these Terms is held to be invalid or unenforceable, the other provisions of these Terms will be unimpaired and the invalid or unenforceable provision will be deemed modified so that it is valid and enforceable to the maximum extent permitted by law.</p>

            <h2>Contact Information</h2>
            <p>If you have any questions about these Terms of Use, please contact us through the website.</p>
          </div>
        `
      }
    };

    // Navigation Functions
    function navigateHome(event) {
      event.preventDefault();
      window.history.pushState({}, '', '/');
      document.getElementById('legalPageView').style.display = 'none';
      document.querySelector('.page-wrapper').style.display = 'flex';
      document.getElementById('mainGridView').style.display = 'block';
      document.getElementById('singleSoundView').style.display = 'none';
      document.getElementById('sectionTitle').textContent = 'Trending Sounds';
      document.title = 'Memesfx | The Modern Soundboard';
      if (!pageCache.has(currentPage)) {
        loadTrending(1);
      }
      window.scrollTo(0, 0);
    }

    function navigateToPage(event, page) {
      event.preventDefault();
      const pageData = legalPages[page];
      if (!pageData) return;

      const urlPath = page === 'privacy' ? '/privacy-policy' : '/terms-of-use';
      window.history.pushState({ legalPage: page }, '', urlPath);

      document.querySelector('.page-wrapper').style.display = 'none';
      document.getElementById('mainGridView').style.display = 'none';
      document.getElementById('singleSoundView').style.display = 'none';
      document.getElementById('legalPageView').style.display = 'block';
      document.getElementById('legalContent').innerHTML = pageData.content;

      document.title = pageData.title + ' | Memesfx';
      window.scrollTo(0, 0);
    }

    function playSound(mp3Url, btnElement) {
      if (currentAudio) {
        currentAudio.pause();
        currentAudio = null;
      }
      btnElement.style.transform = "scale(0.9)";
      setTimeout(() => {
        btnElement.style.transform = "scale(1)";
      }, 150);
      currentAudio = new Audio(mp3Url);
      currentAudio.play().catch((e) => console.error("Playback failed:", e));
    }

    function createInFeedAd() {
      const card = document.createElement("div");
      card.className = "sound-card ad-card";
      const iframe = document.createElement("iframe");
      iframe.style.width = "300px";
      iframe.style.height = "250px";
      iframe.style.border = "none";
      iframe.scrolling = "no";
      const wrapper = document.createElement("div");
      wrapper.style.display = "flex";
      wrapper.style.justifyContent = "center";
      wrapper.style.alignItems = "center";
      wrapper.style.width = "100%";
      wrapper.style.height = "100%";
      wrapper.style.overflow = "hidden";
      wrapper.appendChild(iframe);
      card.appendChild(wrapper);
      setTimeout(() => {
        try {
          const doc = iframe.contentWindow.document;
          doc.open();
          doc.write(
            `<html><body style="margin:0;padding:0;display:flex;justify-content:center;align-items:center;height:100vh;"><script type="text/javascript">atOptions = {'key' : '779520aa602be4ce8eca6a1d6012e88a', 'format' : 'iframe', 'height' : 250, 'width' : 300, 'params' : {} };<\/script><script type="text/javascript" src="//www.highperformanceformat.com/779520aa602be4ce8eca6a1d6012e88a/invoke.js"><\/script></body></html>`
          );
          doc.close();
        } catch (e) {
          console.log("Ad injection error", e);
        }
      }, 100);
      return card;
    }

    function createSoundDOM(sound, index, isSingleView = false) {
      const theme = getRandomTheme(index || 0);
      const card = document.createElement("div");
      card.className = "sound-card";
      card.style.setProperty("--blob-color", theme.color);
      card.style.setProperty("--btn-color", theme.color);
      card.style.setProperty("--btn-shadow", theme.shadow);

      const blob = document.createElement("div");
      blob.className = "card-bg-blob";
      card.appendChild(blob);

      const playWrapper = document.createElement("div");
      playWrapper.className = "play-btn-wrapper";
      const playBtn = document.createElement("button");
      playBtn.className = "play-button";
      playBtn.innerHTML = `<svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"></path></svg>`;
      playBtn.onclick = (e) => {
        e.stopPropagation();
        playSound(sound.mp3, playBtn);
      };
      playWrapper.appendChild(playBtn);
      card.appendChild(playWrapper);

      const content = document.createElement("div");
      content.className = "card-content";
      const titleLink = document.createElement("a");
      titleLink.className = "sound-title";

      // --- FIX: Remove messy numbers from ID for the URL ---
      const cleanSlug = sound.id.replace(/-\d+$/, "");

      // --- NEW URL STRUCTURE USING CLEAN SLUG ---
      titleLink.href = `/sound/${cleanSlug}`;

      titleLink.textContent = sound.title;
      titleLink.onclick = (e) => {
        e.preventDefault();
        // --- PUSH STATE WITH CLEAN PATH ---
        // We use the clean slug for the URL
        window.history.pushState(
          { soundId: sound.id },
          "",
          `/sound/${cleanSlug}`
        );
        loadSingleSound(sound);
      };
      content.appendChild(titleLink);

      const downloadBtn = document.createElement("button");
      downloadBtn.className = "download-btn";
      downloadBtn.innerHTML = `<svg viewBox="0 0 24 24"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/></svg> Download MP3`;
      downloadBtn.onclick = async (e) => {
        e.stopPropagation();
        downloadBtn.innerHTML = "Downloading...";
        try {
          const proxyUrl = `https://api.codetabs.com/v1/proxy?quest=${encodeURIComponent(
            sound.mp3
          )}`;
          const response = await fetch(proxyUrl);
          const blob = await response.blob();
          const url = window.URL.createObjectURL(blob);
          const link = document.createElement("a");
          link.href = url;
          link.download = sound.title + ".mp3";
          document.body.appendChild(link);
          link.click();
          document.body.removeChild(link);
          window.URL.revokeObjectURL(url);
          downloadBtn.innerHTML = "Saved!";
          setTimeout(() => {
            downloadBtn.innerHTML = `<svg viewBox="0 0 24 24"><path d="M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"/></svg> Download MP3`;
          }, 2000);
        } catch (error) {
          console.error("Download failed:", error);
          downloadBtn.innerText = "Error";
        }
      };
      content.appendChild(downloadBtn);
      card.appendChild(content);

      return card;
    }

    function displaySounds(sounds) {
      const grid = document.getElementById("soundsGrid");
      grid.innerHTML = "";
      sounds.forEach((sound, index) => {
        if (index > 0 && index % 6 === 0) grid.appendChild(createInFeedAd());
        grid.appendChild(createSoundDOM(sound, index));
      });
    }

    function updatePagination() {
      document.getElementById(
        "pageInfo"
      ).textContent = `Page ${currentPage} of ${maxPage}`;
      document.getElementById("prevBtn").disabled = currentPage === 1;
      document.getElementById("nextBtn").disabled = currentPage === maxPage;
    }

    function buildApiUrl(base, endpoint, params) {
      const normalizedBase = base.replace(/\/$/, "");
      const normalizedEndpoint = endpoint.startsWith("/")
        ? endpoint
        : `/${endpoint}`;
      const url = new URL(`${normalizedBase}${normalizedEndpoint}`);
      Object.entries(params || {}).forEach(([key, value]) => {
        url.searchParams.set(key, value);
      });
      return url;
    }

    function getApiBases() {
      if (!resolvedApiBase) {
        return API_BASE_CANDIDATES;
      }
      return [
        resolvedApiBase,
        ...API_BASE_CANDIDATES.filter((base) => base !== resolvedApiBase),
      ];
    }

    async function fetchSounds(endpoint, params) {
      let lastError;
      for (const base of getApiBases()) {
        try {
          const url = buildApiUrl(base, endpoint, params);
          const response = await fetch(url.toString());
          if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
          }
          const data = await response.json();
          const payload = Array.isArray(data.data)
            ? data.data
            : data.data
              ? [data.data]
              : [];
          resolvedApiBase = base;
          return payload;
        } catch (error) {
          lastError = error;
        }
      }
      console.error("All API bases failed", lastError);
      return [];
    }

    function updateSEOMetadata(title, description, image) {
      document.title = title;
      document
        .querySelector('meta[name="title"]')
        .setAttribute("content", title);
      document
        .querySelector('meta[name="description"]')
        .setAttribute("content", description);
      document
        .querySelector('meta[property="og:title"]')
        .setAttribute("content", title);
      document
        .querySelector('meta[property="og:description"]')
        .setAttribute("content", description);
      if (image)
        document
          .querySelector('meta[property="og:image"]')
          .setAttribute("content", image);
      if (document.getElementById("pageHeader"))
        document.getElementById("pageHeader").textContent =
          title.split(" - ")[0];
    }

    function injectJSONLD(sound) {
      const schema = {
        "@context": "https://schema.org",
        "@type": "AudioObject",
        name: sound.title,
        description: `Play and download ${sound.title}.`,
        contentUrl: sound.mp3,
        encodingFormat: "audio/mpeg",
        uploadDate: new Date().toISOString(),
      };
      document.getElementById("schema-struct").textContent =
        JSON.stringify(schema);
    }

    async function loadSingleSound(sound) {
      document.getElementById("mainGridView").style.display = "none";
      document.getElementById("singleSoundView").style.display = "flex";
      const container = document.getElementById("singleSoundContainer");
      container.innerHTML = "";
      container.appendChild(createSoundDOM(sound, 3, true));
      const pageTitle = `${sound.title} Sound Button | Memesfx`;
      const pageDesc = `Play and download ${sound.title} sound effect for free on Memesfx.`;
      updateSEOMetadata(pageTitle, pageDesc, sound.image);
      injectJSONLD(sound);
      window.scrollTo(0, 0);
    }

    async function loadTrending(page) {
      if (page < 1 || page > maxPage) return;
      currentPage = page;
      document.getElementById("mainGridView").style.display = "block";
      document.getElementById("singleSoundView").style.display = "none";
      document.getElementById("loading").style.display = "block";
      document.getElementById("soundsGrid").style.display = "none";

      if (pageCache.has(page)) {
        finishLoading(pageCache.get(page));
        return;
      }

      try {
        const sounds = await fetchSounds("/trending", {
          q: "id",
          page,
          limit: 50,
        });
        pageCache.set(page, sounds);
        finishLoading(sounds);
        preloadNextPages(page);
      } catch (error) {
        console.error("Error loading trending:", error);
        document.getElementById("loading").innerText =
          "Error loading sounds.";
      }
    }

    function finishLoading(sounds) {
      document.getElementById("loading").style.display = "none";
      document.getElementById("soundsGrid").style.display = "grid";
      displaySounds(sounds);
      updatePagination();
      document.getElementById("pagination").style.display = "flex";
    }

    function preloadNextPages(page) {
      if (
        page < maxPage &&
        !pageCache.has(page + 1) &&
        !preloadQueue.has(page + 1)
      ) {
        preloadQueue.add(page + 1);
        fetchSounds("/trending", { q: "id", page: page + 1, limit: 50 })
          .then((s) => pageCache.set(page + 1, s))
          .catch((e) => console.log(e))
          .finally(() => preloadQueue.delete(page + 1));
      }
    }

    async function performSearch(term) {
      document.getElementById("loading").style.display = "block";
      document.getElementById("singleSoundView").style.display = "none";
      document.getElementById("mainGridView").style.display = "block";
      document.getElementById("soundsGrid").innerHTML = "";
      try {
        const sounds = await fetchSounds("/search", { q: term, limit: 20 });
        document.getElementById("loading").style.display = "none";
        displaySounds(sounds);
        document.getElementById("pagination").style.display = "none";
      } catch (error) {
        console.error("Error searching:", error);
      }
    }

    document.getElementById("searchBtn").onclick = () => {
      const term = document.getElementById("searchInput").value.trim();
      if (term) {
        window.history.pushState(
          { search: term },
          "",
          `?search=${encodeURIComponent(term)}`
        );
        document.getElementById("sectionTitle").textContent =
          `Search Results: ${term}`;
        performSearch(term);
      } else {
        window.history.pushState({}, "", "/");
        document.getElementById("sectionTitle").textContent =
          "Trending Sounds";
        loadTrending(1);
      }
    };

    document.getElementById("searchInput").onkeypress = (e) => {
      if (e.key === "Enter") document.getElementById("searchBtn").click();
    };
    document.getElementById("backBtn").onclick = () => {
      window.history.pushState({}, "", "/");
      document.getElementById("sectionTitle").textContent = "Trending Sounds";
      loadTrending(1);
    };
    document.getElementById("prevBtn").onclick = () =>
      loadTrending(currentPage - 1);
    document.getElementById("nextBtn").onclick = () =>
      loadTrending(currentPage + 1);

    function getUrlParameter(name) {
      const regex = new RegExp("[\\?&]" + name + "=([^&#]*)");
      const results = regex.exec(window.location.search);
      return results === null
        ? ""
        : decodeURIComponent(results[1].replace(/\+/g, " "));
    }

    // --- INITIALIZATION (ROUTING LOGIC) ---
    window.onload = () => {
      const path = window.location.pathname; // e.g., /sound/vine-boom
      const searchParam = getUrlParameter("search");

      // Check if we are on a legal page via path
      if (path === '/privacy-policy' || path === '/privacy-policy/') {
        document.querySelector('.page-wrapper').style.display = 'none';
        document.getElementById('legalPageView').style.display = 'block';
        document.getElementById('legalContent').innerHTML = legalPages.privacy.content;
        document.title = 'Privacy Policy | Memesfx';
        return;
      }
      if (path === '/terms-of-use' || path === '/terms-of-use/') {
        document.querySelector('.page-wrapper').style.display = 'none';
        document.getElementById('legalPageView').style.display = 'block';
        document.getElementById('legalContent').innerHTML = legalPages.terms.content;
        document.title = 'Terms of Use | Memesfx';
        return;
      }

      // Check if we are at /sound/some-id
      if (path.includes("/sound/")) {
        // Extract the clean ID from the URL path
        const soundId = path.split("/sound/")[1]; // Get 'vine-boom'
        if (soundId) {
          // Fetch and load using the clean ID
          fetchSounds("/search", { q: soundId, limit: 1 }).then((res) => {
            if (res.length) loadSingleSound(res[0]);
            else loadTrending(1);
          });
          return; // Stop here to prevent loading trending
        }
      }

      // Standard logic for homepage or search query params
      if (searchParam) {
        document.getElementById("searchInput").value = searchParam;
        document.getElementById("sectionTitle").textContent =
          `Search Results: ${searchParam}`;
        performSearch(searchParam);
      } else {
        loadTrending(1);
      }
    };

    window.onpopstate = (event) => {
      const path = window.location.pathname;

      // Handle legal pages
      if (path === '/privacy-policy' || path === '/privacy-policy/') {
        document.querySelector('.page-wrapper').style.display = 'none';
        document.getElementById('legalPageView').style.display = 'block';
        document.getElementById('legalContent').innerHTML = legalPages.privacy.content;
        document.title = 'Privacy Policy | Memesfx';
        window.scrollTo(0, 0);
        return;
      }
      if (path === '/terms-of-use' || path === '/terms-of-use/') {
        document.querySelector('.page-wrapper').style.display = 'none';
        document.getElementById('legalPageView').style.display = 'block';
        document.getElementById('legalContent').innerHTML = legalPages.terms.content;
        document.title = 'Terms of Use | Memesfx';
        window.scrollTo(0, 0);
        return;
      }

      // Hide legal page view for non-legal pages
      document.getElementById('legalPageView').style.display = 'none';
      document.querySelector('.page-wrapper').style.display = 'flex';

      // If we are at the root path '/', load trending
      if (path === "/" || path === "/index.html") {
        document.getElementById("singleSoundView").style.display = "none";
        document.getElementById("mainGridView").style.display = "block";
        document.title = 'Memesfx | The Modern Soundboard';
        if (pageCache.has(currentPage)) {
          displaySounds(pageCache.get(currentPage));
        } else {
          loadTrending(1);
        }
      }
      // If we hit back to a search state
      else if (event.state && event.state.search) {
        performSearch(event.state.search);
      }
      // If we hit back to a sound state (handling could be improved here for full SPA)
      else if (path.includes("/sound/")) {
        // Reload location to trigger onload or implement complex state handling
        window.location.reload();
      }
    };
  </script>
</body>

</html>
